<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Happy New Year Fireworks</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: radial-gradient(circle at bottom, #02030a, #000);
    overflow: hidden;
    width: 100%;
    height: 100%;
  }
  canvas {
    display: block;
  }
</style>
</head>
<body>
<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
resize();
window.addEventListener("resize", resize);

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}

const phrase = "HAPPY NEW YEAR";
let letterIndex = 0;

const fireworks = [];
const particles = [];
const letters = [];

class Firework {
  constructor(x, targetY, letter) {
    this.x = x;
    this.y = canvas.height;
    this.vy = -6;
    this.ay = -0.08;
    this.targetY = targetY;
    this.trail = [];
    this.letter = letter;
    this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
  }

  update() {
    this.vy += this.ay;
    this.y += this.vy;

    this.trail.push({ x: this.x, y: this.y });
    if (this.trail.length > 15) this.trail.shift();

    if (this.y <= this.targetY) {
      explode(this.x, this.y, this.color);
      letters.push(new Letter(this.x, this.y, this.letter, this.color));
      return false;
    }
    return true;
  }

  draw() {
    ctx.beginPath();
    ctx.moveTo(this.trail[0]?.x || this.x, this.trail[0]?.y || this.y);
    this.trail.forEach(p => ctx.lineTo(p.x, p.y));
    ctx.strokeStyle = this.color;
    ctx.lineWidth = 2;
    ctx.shadowBlur = 15;
    ctx.shadowColor = this.color;
    ctx.stroke();
  }
}

class Particle {
  constructor(x, y, color) {
    const angle = Math.random() * Math.PI * 2;
    const speed = Math.random() * 5 + 2;
    this.vx = Math.cos(angle) * speed;
    this.vy = Math.sin(angle) * speed;
    this.x = x;
    this.y = y;
    this.life = 60;
    this.color = color;
  }

  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vy += 0.05;
    this.life--;
    return this.life > 0;
  }

  draw() {
    ctx.fillStyle = this.color;
    ctx.shadowBlur = 10;
    ctx.shadowColor = this.color;
    ctx.fillRect(this.x, this.y, 2, 2);
  }
}

class Letter {
  constructor(x, y, char, color) {
    this.x = x;
    this.y = y;
    this.char = char;
    this.alpha = 0;
    this.color = color;
  }

  update() {
    this.alpha = Math.min(this.alpha + 0.02, 1);
  }

  draw() {
    ctx.font = "bold 64px sans-serif";
    ctx.fillStyle = `rgba(255,255,255,${this.alpha})`;
    ctx.shadowBlur = 20;
    ctx.shadowColor = this.color;
    ctx.fillText(this.char, this.x - 16, this.y);
  }
}

function explode(x, y, color) {
  for (let i = 0; i < 80; i++) {
    particles.push(new Particle(x, y, color));
  }
}

function launchFirework() {
  if (letterIndex >= phrase.length) return;

  const spacing = canvas.width / (phrase.length + 1);
  const x = spacing * (letterIndex + 1);
  const y = canvas.height * 0.3;
  fireworks.push(new Firework(x, y, phrase[letterIndex]));
  letterIndex++;
}

let launchTimer = 0;

function resetAnimation() {
  fireworks.length = 0;
  particles.length = 0;
  letters.length = 0;
  letterIndex = 0;
}

function animate() {
  ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  launchTimer++;
  if (launchTimer % 60 === 0 && letterIndex < phrase.length) {
    launchFirework();
  }

  fireworks.forEach((f, i) => {
    if (!f.update()) fireworks.splice(i, 1);
    else f.draw();
  });

  particles.forEach((p, i) => {
    if (!p.update()) particles.splice(i, 1);
    else p.draw();
  });

  letters.forEach(l => {
    l.update();
    l.draw();
  });

  if (letterIndex === phrase.length && particles.length === 0) {
    setTimeout(resetAnimation, 2000);
  }

  requestAnimationFrame(animate);
}

animate();
</script>
</body>
</html>
